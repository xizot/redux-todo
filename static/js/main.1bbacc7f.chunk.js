(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{16:function(e,t,n){e.exports={header:"Header_header__3RSNk",register:"Header_register__OTQi4",active:"Header_active___uFS0"}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(4),a=n.n(r),c=n(12),s=n(18),o=n.n(s),u=n(25),i=n(5),l=function(e){var t=e.username,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){var e=Object(c.a)(a.a.mark((function e(){var c,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(i.a.resetState()),r(i.a.sendRequest()),e.next=4,o.a.post("".concat("https://xizot-auth-server.herokuapp.com","/auth/login"),{username:t,password:n});case 4:c=e.sent,s=c.data,u=s.accessToken,l=s.refreshToken,r(i.a.loginSucceeded({accessToken:u,refreshToken:l}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,s();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r(i.a.requestError((null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(l=u.data)||void 0===l?void 0:l.error)||"Something went wrong!"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.fullname,n=e.username,r=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(s){var u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){var e=Object(c.a)(a.a.mark((function e(){var c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(i.a.resetState()),s(i.a.sendRequest()),e.next=4,o.a.post("".concat("https://xizot-auth-server.herokuapp.com","/auth/register"),{fullname:t,username:n,password:r});case 4:c=e.sent,u=c.data.message,s(i.a.registerSucceeded(u));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,u();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),s(i.a.requestError((null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.error)||"Something went wrong!"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(u.c)()){e.next=3;break}return e.abrupt("return");case 3:return r=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(i.a.resetState()),e.next=3,o.a.post("".concat("https://xizot-auth-server.herokuapp.com","/auth/verify-token"),{},{headers:n});case 3:t(i.a.verifiedToken());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,r();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(u.c)()){e.next=3;break}return e.abrupt("return");case 3:return r=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(i.a.resetState()),e.next=3,o.a.get("".concat("https://xizot-auth-server.herokuapp.com","/auth/logout"),{headers:n});case 3:t(i.a.logout());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,r();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),t(i.a.logout());case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r=function(e){return""!==e.trim()},a=function(e){return e.trim().length>=3},c=function(){var e={},t=localStorage.getItem("accessToken");return t?(e.Authorization="Bearer ".concat(t),e):null}},30:function(e,t,n){e.exports={loading:"Loading_loading__1c-XE",line:"Loading_line__3tqnj","to-up":"Loading_to-up__25Yqn"}},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n(23),a=n(15),c=Object(a.b)({name:"tasks",initialState:{isFetchingData:!1,currentTasks:[],notCompletedTasks:[],isShownModal:!1,completedTasks:[],error:null,errorHandler:null},reducers:{fetchingData:function(e){e.isFetchingData=!0},taskErrorHandler:function(e,t){e.errorHandler=t.payload},resetErrorState:function(e){e.error=null,e.errorHandler=null},getTasksError:function(e,t){e.error=t.payload,e.isFetchingData=!1},replaceCurrentTasks:function(e,t){e.isFetchingData=!1,e.currentTasks=Object(r.a)(t.payload),e.completedTasks=Object(r.a)(t.payload).filter((function(e){return e.isDone})),e.notCompletedTasks=Object(r.a)(t.payload).filter((function(e){return!e.isDone}))},addTask:function(e,t){var n=t.payload;e.currentTasks.unshift(n),e.notCompletedTasks.unshift(n)},removeTask:function(e,t){var n=t.payload;e.currentTasks=e.currentTasks.filter((function(e){return e.taskId!==n})),e.notCompletedTasks=e.notCompletedTasks.filter((function(e){return e.taskId!==n})),e.completedTasks=e.completedTasks.filter((function(e){return e.taskId!==n}))},updateTitle:function(e,t){var n=t.payload,r=n.taskId,a=n.title,c=e.currentTasks.findIndex((function(e){return e.taskId===r}));e.currentTasks[c].title=a,e.completedTasks=e.currentTasks.filter((function(e){return e.isDone})),e.notCompletedTasks=e.currentTasks.filter((function(e){return!e.isDone})),e.isShownModal=!1},updateComplete:function(e,t){var n=t.payload,r=n.taskId,a=n.isDone,c=e.currentTasks.findIndex((function(e){return e.taskId===r}));e.currentTasks[c].isDone=a,e.completedTasks=e.currentTasks.filter((function(e){return e.isDone})),e.notCompletedTasks=e.currentTasks.filter((function(e){return!e.isDone}))},showModal:function(e){e.isShownModal=!0},closeModal:function(e){e.isShownModal=!1}}}),s=c.actions;t.a=c},46:function(e,t,n){},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(15),a=Object(r.b)({name:"auth",initialState:{accessToken:null,refreshToken:null,isAuthenticated:!1,registerSuccessMessage:null,errorResponse:null,isRequesting:!1},reducers:{sendRequest:function(e){e.isRequesting=!0},verifiedToken:function(e){e.isAuthenticated=!0,e.accessToken=localStorage.getItem("accessToken"),e.refreshToken=localStorage.getItem("refreshToken"),e.errorResponse=null},loginSucceeded:function(e,t){var n=t.payload,r=n.accessToken,a=n.refreshToken;e.accessToken=r,e.refreshToken=a,e.isAuthenticated=!0,e.errorResponse=null,localStorage.setItem("accessToken",r),localStorage.setItem("refreshToken",a),e.isRequesting=!1},requestError:function(e,t){e.errorResponse=t.payload,e.isRequesting=!1},registerSucceeded:function(e,t){e.registerSuccessMessage=t.payload,e.isRequesting=!1},logout:function(e){e.isAuthenticated=!1,localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")},resetError:function(e){e.errorResponse=null},resetState:function(e){e.accessToken=null,e.refreshToken=null,e.isAuthenticated=!1,e.registerSuccessMessage=null,e.errorResponse=null,e.isRequesting=!1}}}),c=a.actions;t.b=a},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(20),c=n.n(a),s=n(13),o=(n(46),n(3)),u=n(16),i=n.n(u),l=n(11),d=n(21),f=n(1),p=function(e){var t=Object(l.c)((function(e){return e.auth.isAuthenticated})),n=Object(l.b)();return Object(f.jsxs)("header",{className:i.a.header,children:[Object(f.jsx)("h2",{children:"ReduxTodo"}),Object(f.jsxs)("ul",{children:[t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(s.c,{to:"/todo",activeClassName:i.a.active,children:"My Todo"})}),Object(f.jsx)("li",{onClick:function(){n(Object(d.b)())},children:"Log out"})]}),!t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(s.c,{to:"/login",activeClassName:i.a.active,children:"Sign In"})}),Object(f.jsx)("li",{className:i.a.register,children:Object(f.jsx)(s.c,{to:"/register",activeClassName:i.a.active,children:"Sign Up"})})]})]})]})},h=n(24),j=n(41),b=["component"],k=function(e){var t=e.component,n=Object(j.a)(e,b),r=Object(l.c)((function(e){return e.auth.isAuthenticated}));return Object(f.jsx)(o.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return r?Object(f.jsx)(t,{}):Object(f.jsx)(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},v=n(30),m=n.n(v),g=function(){return Object(f.jsx)("div",{className:m.a.loading,children:Object(f.jsx)("span",{className:m.a.line})})},x=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,89))})),O=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,90))})),T=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,91))}));var S=function(){var e=Object(l.b)();return Object(r.useEffect)((function(){e(Object(d.d)())}),[e]),Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)(g,{}),children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(p,{}),Object(f.jsxs)("main",{children:[Object(f.jsx)(o.b,{path:"/",exact:!0,children:Object(f.jsx)(o.a,{to:"/todo"})}),Object(f.jsx)(k,{path:"/todo",exact:!0,component:T}),Object(f.jsx)(o.b,{path:"/register",children:Object(f.jsx)(x,{})}),Object(f.jsx)(o.b,{path:"/login",children:Object(f.jsx)(O,{})})]})]})})},w=(n(72),n(15)),y=n(5),I=n(32),_=Object(w.a)({reducer:{tasks:I.a.reducer,auth:y.b.reducer}});c.a.render(Object(f.jsx)(l.a,{store:_,children:Object(f.jsx)(s.a,{children:Object(f.jsx)(S,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.1bbacc7f.chunk.js.map